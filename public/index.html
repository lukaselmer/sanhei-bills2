<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Firebase Hosting</title>

  <!-- update the version number as needed -->
  <script defer src="/__/firebase/4.1.3/firebase-app.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/4.1.3/firebase-auth.js"></script>
  <script defer src="/__/firebase/4.1.3/firebase-database.js"></script>
  <!-- initialize the SDK after all desired features are loaded -->
  <script defer src="/__/firebase/init.js"></script>

  <style media="screen">
    body {
      background: white;
      color: rgba(0, 0, 0, 0.87);
      font-family: Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
<div id="message">
  <h2>Welcome</h2>
  <h1>Firebase Hosting Setup Complete</h1>
</div>
<p id="load">Firebase SDK Loading&hellip;</p>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // // ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
    // // The Firebase SDK is initialized and available here!
    //
    function updateUserInfo(user) {
      document.getElementById('load').innerHTML =
          `Hello ${user.displayName}, you are logged in with ${user.email}`;
    }

    firebase.auth().onAuthStateChanged(user => {
      console.log(`User ${user} is logged in`);
      updateUserInfo(user);

      console.log(user);

      firebase.database().ref(`${user.uid}/bills`).limitToLast(100).once('value', snapshot => {
        const data = snapshot.val();
        console.log(data);
        const titlesHtml = Object.keys(data).map(id => `<p>${data[id].title1}</p>`).join('');
        document.getElementById('load').innerHTML += titlesHtml;
      });
      //      firebase.database().ref(user.uid).set({
      //        hello: 'world'
      //      });
    });

    const provider = new firebase.auth.GoogleAuthProvider();
    firebase.auth().signInWithPopup(provider).then(function (result) {
      const user = result.user;
      console.log(`Hello ${user}!`);
    }).catch(function (error) {
      // Handle Errors here.
      const errorCode = error.code;
      const errorMessage = error.message;
      // The email of the user's account used.
      const email = error.email;
      // The firebase.auth.AuthCredential type that was used.
      const credential = error.credential;
      // ...
    });


    //
    // // ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥

    // const app = firebase.app();
  });
</script>
</body>
</html>
